{% extends "base.html" %}
{% set show_navbar = True %}
{% block title %}Settings{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold mb-6">Settings</h1>

<form method="post" class="space-y-8">

    {% for section, fields in config.items() %}
    <section>
	<h2 class="text-xl font-semibold mb-3">{{ section }}</h2>
	<div class="divide-y border rounded-lg bg-gray-50">
	    {% for key, meta in fields.items() %}
	    {% set value = meta.value %}
	    {% set ftype = meta.type %}
	    <div class="flex items-center justify-between px-4 py-3">
		<label class="text-gray-700 font-medium">{{ key|capitalize }}</label>
		
		{% if ftype == "bool" %}
		<input type="hidden" name="{{ section }}:{{ key }}" value="false">
		<input type="checkbox"
		       name="{{ section }}:{{ key }}"
                       value="true"
		       {% if value %} checked {% endif %}
		       class="w-5 h-5 accent-blue-600">
		{% elif ftype == "number" %}
		<input type="number"
		       name="{{ section }}:{{ key}}"
		       value="{{ value }}"
		       class="border rounded p-2 w-1/3 text-right">
		{% elif ftype == "select" %}
		<select name="{{ section }}:{{ key }}"
			      class="border rounded p-2 w-1/3 text-right">
		    {% for opt in meta.options %}
		    <option value="{{ opt }}" {% if opt == value %}selected{% endif %}>{{ opt|capitalize }}</option>
		    {% endfor %}
		</select>
		{% else %}
		<input type="text"
		       name="{{ section }}:{{ key }}"
		       value="{{ value }}"
                       class="border rounded p-2 w-1/2 text-right">
		{% endif %}
	    </div>
	    {% endfor %}
	</div>
    </section>
    {% endfor %}

    <div class="flex justify-end space-x-3 mt-6">
	<a href="/home" class="px-4 py-2 rounded bg-gray-200 text-gray-700 hover:bg-gray-300">Cancel</a>
	<button type="submit" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Save</button>
    </div>
</form>
{% endblock %}
